(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{203:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"toggleCheckAll",(function(){return N})),n.d(a,"toggleCheckbox",(function(){return C})),n.d(a,"NON_STOPS",(function(){return x})),n.d(a,"ONE_STOPS",(function(){return H})),n.d(a,"TWO_STOPS",(function(){return W})),n.d(a,"THREE_STOPS",(function(){return A})),n.d(a,"FETCH_REQUEST",(function(){return P})),n.d(a,"FETCH_REQUEST_GOOD",(function(){return w})),n.d(a,"FETCH_REQUEST_BAD",(function(){return F})),n.d(a,"GET_TICKETS",(function(){return B}));var r={};n.r(r),n.d(r,"THE_CHEAPSET",(function(){return R})),n.d(r,"THE_FASTEST",(function(){return M})),n.d(r,"OPTIMAL",(function(){return G}));var c=n(0),s=n.n(c),i=n(24),o=n.n(i),l=n(40),u=n(8),_=n(66),f=n(5),p=n(1),g={checkBoxSettings:[{label:"\u0412\u0441\u0435",id:1,isChecked:!1,disabled:!1},{label:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",id:2,isChecked:!1,disabled:!1},{label:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",id:3,isChecked:!1,disabled:!1},{label:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",id:4,isChecked:!1,disabled:!1},{label:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",id:5,isChecked:!1,disabled:!1}],arrayTickets:[],arrayWorkingOfTickets:[],loadingEnd:!1},m=(n(87),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REQUEST":return Object(p.a)(Object(p.a)({},e),{},{loadingEnd:t.payload});case"NON_STOPS":if(t.payload){var n=e.arrayWorkingOfTickets.filter((function(e){return!(0===e.segments[0].stops.length&&0===e.segments[1].stops.length)}));return Object(p.a)(Object(p.a)({},e),{},{arrayWorkingOfTickets:n})}var a=e.arrayTickets.filter((function(e){return 0===e.segments[0].stops.length&&0===e.segments[1].stops.length})),r=[].concat(Object(f.a)(a),Object(f.a)(e.arrayWorkingOfTickets)).sort((function(e){if(0===(e=e.segments[0].stops.length+e.segments[1].stops.length))return 1}));return Object(p.a)(Object(p.a)({},e),{},{arrayWorkingOfTickets:r});case"ONE_STOPS":if(t.payload){var c=e.arrayWorkingOfTickets.filter((function(e){return!(e.segments[0].stops.length+e.segments[1].stops.length-1===0)}));return Object(p.a)(Object(p.a)({},e),{},{arrayWorkingOfTickets:c})}var s=e.arrayTickets.filter((function(e){return e.segments[0].stops.length+e.segments[1].stops.length-1===0})),i=[].concat(Object(f.a)(s),Object(f.a)(e.arrayWorkingOfTickets)).sort((function(e){if(1===(e=e.segments[0].stops.length+e.segments[1].stops.length))return 1}));return Object(p.a)(Object(p.a)({},e),{},{arrayWorkingOfTickets:i});case"TWO_STOPS":if(t.payload){var o=e.arrayWorkingOfTickets.filter((function(e){return e.segments[0].stops.length+e.segments[1].stops.length-2!==0}));return Object(p.a)(Object(p.a)({},e),{},{arrayWorkingOfTickets:o})}var l=e.arrayTickets.filter((function(e){return e.segments[0].stops.length+e.segments[1].stops.length-2===0})),u=[].concat(Object(f.a)(l),Object(f.a)(e.arrayWorkingOfTickets)).sort((function(e){if(2===(e=e.segments[0].stops.length+e.segments[1].stops.length))return 1}));return Object(p.a)(Object(p.a)({},e),{},{arrayWorkingOfTickets:u});case"THREE_STOPS":if(t.payload){var _=e.arrayWorkingOfTickets.filter((function(e){return!(e.segments[0].stops.length+e.segments[1].stops.length-3===0)}));return Object(p.a)(Object(p.a)({},e),{},{arrayWorkingOfTickets:_})}var m=e.arrayTickets.filter((function(e){return e.segments[0].stops.length+e.segments[1].stops.length-3===0})),k=[].concat(Object(f.a)(m),Object(f.a)(e.arrayWorkingOfTickets)).sort((function(e){if(3===(e=e.segments[0].stops.length+e.segments[1].stops.length))return 1}));return Object(p.a)(Object(p.a)({},e),{},{arrayWorkingOfTickets:k});case"CHECKED_ALL":if(1===t.payload){if(e.checkBoxSettings[0].isChecked){var d=e.checkBoxSettings.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{isChecked:!1})}));return Object(p.a)(Object(p.a)({},e),{},{checkBoxSettings:d,arrayWorkingOfTickets:[]})}var E=e.checkBoxSettings.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{isChecked:!0})}));return Object(p.a)(Object(p.a)({},e),{},{checkBoxSettings:E,arrayWorkingOfTickets:e.arrayTickets})}case"CHECKED":var O=e.checkBoxSettings.map((function(e){return e.id===t.payload?Object(p.a)(Object(p.a)({},e),{},{isChecked:!e.isChecked}):e})),b=function(){var e=O.slice(1).every((function(e){return!0===e.isChecked}));O.slice(0,1)[0].isChecked=e};if(1!==t.payload)return b(),Object(p.a)(Object(p.a)({},e),{},{checkBoxSettings:O});case"FETCH_REQUEST_GOOD":var T=e.arrayTickets;return Object(p.a)(Object(p.a)({},e),{},{arrayTickets:[].concat(Object(f.a)(T),Object(f.a)(t.payload)),arrayWorkingOfTickets:[].concat(Object(f.a)(T),Object(f.a)(t.payload))});case"THE_CHEAPSET":var h=e.arrayWorkingOfTickets.sort((function(e,t){return e.price-t.price}));return Object(p.a)(Object(p.a)({},e),{},{arrayWorkingOfTickets:h});case"THE_FASTEST":var y=Object(f.a)(e.arrayWorkingOfTickets).sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)}));return Object(p.a)(Object(p.a)({},e),{},{arrayWorkingOfTickets:y});default:return console.log("default"),e}}),k=(n(65),n(67)),d=n.n(k),E=n(216),O=n(217),b=(n(202),n(203),n(10)),T=n.n(b),h=n(16);function y(e,t){return v.apply(this,arguments)}function v(){return(v=Object(h.a)(T.a.mark((function e(t,n){var a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:if(!(a=e.sent).ok){e.next=9;break}return e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.err(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var S=y("GET","https://front-test.beta.aviasales.ru/search"),j=function(e){return y("GET","".concat("https://front-test.beta.aviasales.ru/tickets","?searchId=").concat(e))},N=function(e){return{type:"CHECKED_ALL",payload:e}},C=function(e,t){return function(n){n({type:"CHECKED",payload:e}),2===e&&n(x(t)),3===e&&n(H(t)),4===e&&n(W(t)),5===e&&n(A(t))}},x=function(e){return{type:"NON_STOPS",payload:e}},H=function(e){return{type:"ONE_STOPS",payload:e}},W=function(e){return{type:"TWO_STOPS",payload:e}},A=function(e){return{type:"THREE_STOPS",payload:e}},P=function(e){return{type:"FETCH_REQUEST",payload:e}},w=function(e){return{type:"FETCH_REQUEST_GOOD",payload:e}},F=function(){return{type:"FETCH_REQUEST_BAD",payload:"Error"}},B=function(){return function(){var e=Object(h.a)(T.a.mark((function e(t){var n,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S;case 2:return n=e.sent,a=function(){var e=Object(h.a)(T.a.mark((function e(){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(n.searchId);case 3:if(r=e.sent,t(w(r.tickets)),t(P(!0)),r.stop){e.next=11;break}return t(F()),e.abrupt("return",a());case 11:t(P(!1));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",a());case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",a());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var D=Object(u.b)((function(e){return{state:e}}),a)((function(e){var t=e.state,n=e.toggleCheckAll,a=e.toggleCheckbox,r=(e.GET_TICKETS,t.checkBoxSettings.map((function(e){var t=e.label,r=e.id,c=e.isChecked,i=e.disabled;return s.a.createElement("label",{key:r,className:"container__checkbox option"},s.a.createElement("input",{type:"checkbox",className:"check__input totalCheckbox",onClick:function(){1===r?n(r,c):a(r,c)},checked:c,disabled:i}),s.a.createElement("span",{className:"custom__check__box"}),t)})));return s.a.createElement("div",{className:"filter__checkbox__wrapper"},s.a.createElement("span",{className:"container__checkbox__name option"},"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"),r)})),R=(n(205),function(){return{type:"THE_CHEAPSET"}}),M=function(){return{type:"THE_FASTEST"}},G=function(e){return{type:"OPTIMAL",payload:e}};var I=Object(u.b)((function(e){return{state:e}}),r)((function(e){var t=e.state,n=e.THE_CHEAPSET,a=e.THE_FASTEST;return console.log("State in Filter ticket",e),s.a.createElement("div",{className:"tabs"},s.a.createElement("button",{className:"tabs__button",value:"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0415\u0412\u042b\u0419",disabled:t.loadingEnd,onClick:n},"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0415\u0412\u042b\u0419"),s.a.createElement("button",{className:"tabs__button",value:"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419",onClick:a},"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"))})),L=n(68),Q=n.n(L);n(206);var U=Object(u.b)((function(e){return{state:e}}),r)((function(e){return e.state.arrayWorkingOfTickets.map((function(e){var t=e.price,n=(e.carrier,e.segments),a=new Date(n[0].date),r=new Date(n[1].date),c=function(e){var t=new Date(e.getTime()+6e4*n[0].duration);return"".concat(e.getHours(),":").concat(e.getMinutes()>10?e.getMinutes():"0".concat(e.getMinutes()),"\n      -").concat(t.getHours(),":").concat(t.getMinutes()>10?t.getMinutes():"0".concat(t.getMinutes())).toString()},i=function(e){return"".concat(Math.trunc(e/60),"\u0447 ").concat(e%60," \u043c\u0438\u043d")};return s.a.createElement("div",{className:"ticket"},s.a.createElement("div",{className:"ticket__header"},s.a.createElement("span",{className:"ticket__price"},"".concat(t," \u0420")),s.a.createElement("img",{src:Q.a,alt:"\u043b\u043e\u0433\u043e S7",className:"logo_S7"})),s.a.createElement("div",{className:"ticket__container__info"},s.a.createElement("div",{className:"ticket__info"},s.a.createElement("div",{className:"info__ticket__route"},s.a.createElement("span",{className:"info__ticket__route__title"},"".concat(n[0].origin," - ").concat(n[0].destination)),s.a.createElement("span",{className:"info__ticket__route__time"},c(a))),s.a.createElement("div",{className:"info__ticket__lenght"},s.a.createElement("span",{className:"info__ticket__lenght__text"},"\u0412 \u041f\u0423\u0422\u0418"),s.a.createElement("span",{className:"info__ticket__lenght__time"},i(n[0].duration))),s.a.createElement("div",{className:"info__ticket__stops"},s.a.createElement("span",{className:"info__ticket__stops__counter"},"".concat(n[0].stops.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418")),s.a.createElement("span",{className:"info__ticket__stops__name"},n[0].stops.join(", ")))),s.a.createElement("div",{className:"ticket__info"},s.a.createElement("div",{className:"info__ticket__route"},s.a.createElement("span",{className:"info__ticket__route__title"},"".concat(n[1].origin," - ").concat(n[1].destination)),s.a.createElement("span",{className:"info__ticket__route__time"},c(r))),s.a.createElement("div",{className:"info__ticket__lenght"},s.a.createElement("span",{className:"info__ticket__lenght__text"},"\u0412 \u041f\u0423\u0422\u0418"),s.a.createElement("span",{className:"info__ticket__lenght__time"},i(n[1].duration))),s.a.createElement("div",{className:"info__ticket__stops"},s.a.createElement("span",{className:"info__ticket__stops__counter"},"".concat(n[1].stops.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418")),s.a.createElement("span",{className:"info__ticket__stops__name"},n[1].stops.join(", "))))))})).slice(0,5)})),K=s.a.createElement(O.a,{style:{fontSize:24},spin:!0}),z={marginTop:"50%"};var J=Object(u.b)((function(e){return{state:e}}),a)((function(e){var t=e.state,n=e.GET_TICKETS;return Object(c.useEffect)((function(){n()}),[n]),s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"logo__container"},s.a.createElement("img",{src:d.a,alt:"\u043b\u043e\u0433\u043e \u0441\u0430\u043c\u043e\u043b\u0435\u0442",className:"logo-airplane-png"})),s.a.createElement(D,null),s.a.createElement("div",{className:"container__result"},s.a.createElement(I,null),s.a.createElement(E.a,{spinning:t.loadingEnd,size:"large",indicator:K,className:z}),0===t.arrayWorkingOfTickets.length?s.a.createElement("p",null,"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"):s.a.createElement(U,null)))})),q=Object(l.b)(m,Object(l.a)((function(e){return function(t){return function(n){console.log("dispatchung:",n),console.log("before:",e.getState());var a=t(n);return console.log("after:",e.getState()),a}}}),_.a));o.a.render(s.a.createElement(u.a,{store:q},s.a.createElement(J,null)),document.getElementById("root"))},65:function(e,t,n){},67:function(e,t,n){e.exports=n.p+"static/media/LogoAirplan.3fe3a289.svg"},68:function(e,t,n){e.exports=n.p+"static/media/S7 Logo.35aae663.svg"},78:function(e,t,n){e.exports=n(212)}},[[78,1,2]]]);
//# sourceMappingURL=main.1de2ae47.chunk.js.map