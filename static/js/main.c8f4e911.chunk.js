(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{26:function(e,t,n){},30:function(e,t,n){e.exports=n.p+"static/media/LogoAirplan.3fe3a289.svg"},31:function(e,t,n){e.exports=n.p+"static/media/S7 Logo.35aae663.svg"},43:function(e,t,n){e.exports=n(68)},53:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"FETCH_REQUEST",(function(){return b})),n.d(a,"FETCH_REQUEST_GOOD",(function(){return v})),n.d(a,"FETCH_REQUEST_BAD",(function(){return O})),n.d(a,"GET_TICKETS",(function(){return C})),n.d(a,"toggleCheckAll",(function(){return y})),n.d(a,"toggleCheckbox",(function(){return S})),n.d(a,"NUMBER_STOPS",(function(){return T})),n.d(a,"THE_SORTING",(function(){return N}));var c=n(0),r=n.n(c),i=n(13),s=n.n(i),o=n(6),u=(n(26),n(30)),l=n.n(u),d=n(72),_=n(73),p=(n(52),n(53),n(9)),f=n.n(p),m=n(11);function k(e,t){return h.apply(this,arguments)}function h(){return(h=Object(m.a)(f.a.mark((function e(t,n){var a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:if(!(a=e.sent).ok){e.next=9;break}return e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.err(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var g=k("GET","https://front-test.beta.aviasales.ru/search"),E=function(e){return k("GET","".concat("https://front-test.beta.aviasales.ru/tickets","?searchId=").concat(e))},b=function(e){return{type:"FETCH_REQUEST",payload:e}},v=function(e){return{type:"FETCH_REQUEST_GOOD",payload:e}},O=function(){return{type:"FETCH_REQUEST_BAD",payload:"Error"}},C=function(){return function(){var e=Object(m.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g;case 2:return n=e.sent,a=function(){var e=Object(m.a)(f.a.mark((function e(){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(n.searchId);case 3:if(c=e.sent,t(v(c.tickets)),t(b(!0)),c.stop){e.next=11;break}return t(O()),e.abrupt("return",a());case 11:t(b(!1));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",a());case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",a());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(e){return{type:"CHECKED_ALL",payload:e}},S=function(e,t){return function(n){n({type:"CHECKED",payload:e}),n(T(e,t))}},T=function(e,t){return{type:"NUMBER_STOPS",payload:{id:e,isChecked:t}}},N=function(e,t){return e?{type:"THE_SORTING",payload:{isChecked:t,id:e}}:{type:"THE_SORTING",payload:{id:null}}};var j=Object(o.b)((function(e){return{checkBoxSettings:e.reducerFilter.checkBoxSettings}}),a)((function(e){var t=e.checkBoxSettings,n=e.toggleCheckAll,a=e.toggleCheckbox,c=t.map((function(e){var t=e.label,c=e.id,i=e.isChecked;return r.a.createElement("label",{key:c,className:"container__checkbox option"},r.a.createElement("input",{type:"checkbox",className:"check__input totalCheckbox",onClick:function(){"All"===c?n(c,i):a(c,i)},checked:i}),r.a.createElement("span",{className:"custom__check__box"}),t)}));return r.a.createElement("div",{className:"filter__checkbox__wrapper"},r.a.createElement("span",{className:"container__checkbox__name option"},"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"),c)}));n(55);var x=Object(o.b)((function(e){return{sortingStatus:e.reducerSorting.sortingStatus}}),a)((function(e){var t=e.THE_SORTING,n=e.sortingStatus.map((function(e){var n=e.id,a=e.label,c=e.isChecked,i=["tabs__button"];return c||i.push("tabs__button1"),r.a.createElement("button",{className:i.join(" "),id:n,onClick:function(){t(n,c)}},a)}));return r.a.createElement("div",{className:"tabs"},n)})),B=n(8),H=n(31),F=n.n(H),w=(n(56),function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=function(){return t.checkBoxSettings.map((function(n){var c,r=e.arrayTickets.filter((function(e){return e.segments[0].stops.length+e.segments[1].stops.length===n.id})),i=t.checkBoxSettings.every((function(e){return!e.isChecked})),s=t.checkBoxSettings.every((function(e){return e.isChecked}));(n.isChecked&&"All"===n.id?a=Object(B.a)(e.arrayTickets):n.isChecked||"All"!==n.id||(a=[]),n.isChecked&&!s)?(c=a).push.apply(c,Object(B.a)(r)):i&&(a=[])})),a},r=function(e){return Object(B.a)(e.sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)})))},i=function(e){return Object(B.a)(e.sort((function(e,t){return e.price-t.price})))},s=n.sortingStatus.some((function(e){return!e.isChecked&&"cheap"===e.id})),o=n.sortingStatus.some((function(e){return!e.isChecked&&"fast"===e.id}));return s?(console.log(c()),i(c())):o?(console.log(c()),r(c())):c()});var R=Object(o.b)((function(e){var t=e.reducerFetch,n=e.reducerFilter,a=e.reducerSorting;return{arrayWorkingOfTickets:Object(B.a)(w(t,n,a)),loadingEnd:t.loadingEnd}}),a)((function(e){return e.arrayWorkingOfTickets.map((function(e){var t=e.price,n=(e.carrier,e.segments),a=new Date(n[0].date),c=new Date(n[1].date),i=function(e){var t=new Date(e.getTime()+6e4*n[0].duration);return"".concat(e.getHours(),":").concat(e.getMinutes()>10?e.getMinutes():"0".concat(e.getMinutes()),"\n      -").concat(t.getHours(),":").concat(t.getMinutes()>10?t.getMinutes():"0".concat(t.getMinutes())).toString()},s=function(e){return"".concat(Math.trunc(e/60),"\u0447 ").concat(e%60," \u043c\u0438\u043d")};return r.a.createElement("div",{className:"ticket"},r.a.createElement("div",{className:"ticket__header"},r.a.createElement("span",{className:"ticket__price"},"".concat(t," \u0420")),r.a.createElement("img",{src:F.a,alt:"\u043b\u043e\u0433\u043e S7",className:"logo_S7"})),r.a.createElement("div",{className:"ticket__container__info"},r.a.createElement("div",{className:"ticket__info"},r.a.createElement("div",{className:"info__ticket__route"},r.a.createElement("span",{className:"info__ticket__route__title"},"".concat(n[0].origin," - ").concat(n[0].destination)),r.a.createElement("span",{className:"info__ticket__route__time"},i(a))),r.a.createElement("div",{className:"info__ticket__lenght"},r.a.createElement("span",{className:"info__ticket__lenght__text"},"\u0412 \u041f\u0423\u0422\u0418"),r.a.createElement("span",{className:"info__ticket__lenght__time"},s(n[0].duration))),r.a.createElement("div",{className:"info__ticket__stops"},r.a.createElement("span",{className:"info__ticket__stops__counter"},"".concat(n[0].stops.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418")),r.a.createElement("span",{className:"info__ticket__stops__name"},n[0].stops.join(", ")))),r.a.createElement("div",{className:"ticket__info"},r.a.createElement("div",{className:"info__ticket__route"},r.a.createElement("span",{className:"info__ticket__route__title"},"".concat(n[1].origin," - ").concat(n[1].destination)),r.a.createElement("span",{className:"info__ticket__route__time"},i(c))),r.a.createElement("div",{className:"info__ticket__lenght"},r.a.createElement("span",{className:"info__ticket__lenght__text"},"\u0412 \u041f\u0423\u0422\u0418"),r.a.createElement("span",{className:"info__ticket__lenght__time"},s(n[1].duration))),r.a.createElement("div",{className:"info__ticket__stops"},r.a.createElement("span",{className:"info__ticket__stops__counter"},"".concat(n[1].stops.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418")),r.a.createElement("span",{className:"info__ticket__stops__name"},n[1].stops.join(", "))))))})).slice(0,5)})),A=r.a.createElement(_.a,{style:{fontSize:24},spin:!0}),D={marginTop:"50%"};var G=Object(o.b)((function(e){var t=e.reducerFetch,n=e.reducerFilter;return{tickets:t.arrayTickets,loadingEnd:t.loadingEnd,allFilterNoChecked:n.checkBoxSettings.every((function(e){return!e.isChecked}))}}),a)((function(e){var t=e.loadingEnd,n=e.GET_TICKETS,a=e.allFilterNoChecked;return Object(c.useEffect)((function(){n()}),[n]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"logo__container"},r.a.createElement("img",{src:l.a,alt:"\u043b\u043e\u0433\u043e \u0441\u0430\u043c\u043e\u043b\u0435\u0442",className:"logo-airplane-png"})),r.a.createElement(j,null),r.a.createElement("div",{className:"container__result"},r.a.createElement(x,null),r.a.createElement(d.a,{spinning:t,size:"large",indicator:A,className:D}),function(e){return e?r.a.createElement("p",null,"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"):r.a.createElement(R,null)}(a)))})),I=n(10),M=n(41),U=n(42),Q=n(1),K={checkBoxSettings:[{label:"\u0412\u0441\u0435",id:"All",isChecked:!0},{label:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",id:0,isChecked:!0},{label:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",id:1,isChecked:!0},{label:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",id:2,isChecked:!0},{label:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",id:3,isChecked:!0}],sortingStatus:[{label:"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0415\u0412\u042b\u0419",id:"cheap",isChecked:!0},{label:"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419",id:"fast",isChecked:!0}],arrayTickets:[],loadingEnd:!1},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHECKED_ALL":if("All"===t.payload){if(!e.checkBoxSettings[0].isChecked){var n=e.checkBoxSettings.map((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{isChecked:!0})}));return Object(Q.a)(Object(Q.a)({},e),{},{checkBoxSettings:n})}var a=e.checkBoxSettings.map((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{isChecked:!1})}));return Object(Q.a)(Object(Q.a)({},e),{},{checkBoxSettings:a})}break;case"CHECKED":var c=e.checkBoxSettings.map((function(e){return e.id===t.payload?Object(Q.a)(Object(Q.a)({},e),{},{isChecked:!e.isChecked}):e})),r=function(){var e=c.slice(1).every((function(e){return!0===e.isChecked}));c.slice(0,1)[0].isChecked=e};if("All"!==t.payload)return r(),Object(Q.a)(Object(Q.a)({},e),{},{checkBoxSettings:c});break;default:return e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,n=function(e){return e.sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)}))},a=function(e){return e.sort((function(e,t){return e.price-t.price}))};switch(t.type){case"THE_SORTING":var c=e.sortingStatus.map((function(e){return t.payload.id===e.id?Object(Q.a)(Object(Q.a)({},e),{},{isChecked:!t.payload.isChecked}):Object(Q.a)(Object(Q.a)({},e),{},{isChecked:!0})}));return Object(Q.a)(Object(Q.a)({},e),{},{arrayWorkingOfTickets:"fast"===t.payload.id?n(e.arrayTickets):a(e.arrayTickets),sortingStatus:c});default:return e}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REQUEST":return Object(Q.a)(Object(Q.a)({},e),{},{loadingEnd:t.payload});case"FETCH_REQUEST_GOOD":var n=e.arrayTickets;return Object(Q.a)(Object(Q.a)({},e),{},{arrayTickets:[].concat(Object(B.a)(n),Object(B.a)(t.payload))});default:return e}},J=Object(I.combineReducers)({reducerFetch:z,reducerFilter:L,reducerSorting:W}),P=Object(I.createStore)(J,Object(M.composeWithDevTools)(Object(I.applyMiddleware)(U.a)));s.a.render(r.a.createElement(o.a,{store:P},r.a.createElement(G,null)),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.c8f4e911.chunk.js.map